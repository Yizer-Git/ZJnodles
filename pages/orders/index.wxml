<view class="page">
  <view class="header">我的订单</view>
  <block wx:if="{{!displayOrders.length}}">
    <view wx:if="{{loading}}" class="state">加载中...</view>
    <view wx:else class="state">暂无订单</view>
  </block>
  <block wx:else>
    <block wx:for="{{displayOrders}}" wx:key="id">
      <view class="order-card">
        <view class="order-header">
          <view class="order-id">订单号 {{item.id}}</view>
          <view class="order-status">{{item.statusText}}</view>
        </view>
        <view class="order-body">
          <block wx:for="{{item.items}}" wx:key="index">
            <view class="order-item">
              <text class="order-item-title">{{item.title || '未命名商品'}}</text>
              <text class="order-item-qty">× {{item.qty || 0}}</text>
            </view>
          </block>
        </view>
        <view class="order-footer">
          <view class="order-total">合计 {{item.total}}</view>
          <view wx:if="{{item.createdAt}}" class="order-time">{{item.createdAt}}</view>
        </view>
      </view>
    </block>
    <view wx:if="{{loading}}" class="state small">加载中...</view>
    <view wx:elif="{{!hasMore}}" class="state small">已加载全部</view>
  </block>
</view>

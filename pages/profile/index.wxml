<view class="profile-page">
  <view class="profile-header surface-card surface-card--accent">
    <view class="user-info">
      <image class="avatar" mode="aspectFill" src="{{avatarUrl}}"></image>
      <view class="user-meta">
        <text class="nickname">{{displayName}}</text>
        <text class="member-tier-text">{{memberTierLabel}}</text>
        <text class="member-summary-text">{{memberSummary}}</text>
        <text class="greeting">æ¬¢è¿æ¥åˆ°ä¸­æ±ŸæŒ‚é¢æ•°å­—æœåŠ¡ä¸­å¿ƒ</text>
      </view>
      <view class="settings-trigger" bindtap="handleSettingsTap" hover-class="settings-trigger--active" hover-stay-time="60">
        <image class="settings-icon-img" mode="aspectFit" src="/assets/images/icons/settings.svg"></image>
      </view>
    </view>
    <view class="vip-inline ds-card">
      <view class="vip-inline-meta">
        <view class="vip-inline-badge">
          <text class="vip-inline-icon">ğŸ‘‘</text>
          <text class="vip-inline-label">ç”„é€‰ä¼šå‘˜</text>
        </view>
        <text class="vip-inline-desc">{{vipSubtitle}}</text>
      </view>
      <button class="vip-inline-btn ds-pill" size="mini" bindtap="handleVipAction">{{vipActionLabel}}</button>
    </view>
  </view>

  <view class="stats-card ds-card">
    <view class="stats-item">
      <text class="stats-value">{{memberPointsDisplay}}</text>
      <text class="stats-label">ç§¯åˆ†</text>
    </view>
    <view class="stats-divider"></view>
    <view class="stats-item stats-item--tier">
      <text class="stats-value stats-value-tier">{{memberTierLabel}}</text>
      <text class="stats-label">ä¼šå‘˜ç­‰çº§</text>
    </view>
    <view class="stats-divider"></view>
    <view class="stats-item">
      <text class="stats-value">{{memberCouponCount}}</text>
      <text class="stats-label">ä¸“å±åˆ¸</text>
    </view>
  </view>

  <view class="data-overview">
    <view class="data-grid ds-grid ds-grid--2">
      <view class="data-half-card ds-card data-card-accent">
        <text class="data-title">ç”„é€‰ç§¯åˆ†</text>
        <text class="data-value">{{memberPointsDisplay}}</text>
        <text class="data-caption">{{memberCaption}}</text>
      </view>
      <view class="data-half-card ds-card">
        <text class="data-title">ä¼šå‘˜æˆé•¿å€¼</text>
        <view class="progress-bar-wrapper">
          <progress class="member-progress" percent="{{growthPercent}}" show-info stroke-width="8" activeColor="#B45309"></progress>
        </view>
        <text class="data-caption">è·ç¦» LV{{nextLevel}} è¿˜éœ€ {{growthRemaining}} ç‚¹</text>
      </view>
    </view>
    <view class="badge-row">
      <block wx:for="{{badges}}" wx:key="id">
        <view class="badge-chip {{item.accent ? 'badge-chip--accent' : ''}}">
          <text class="badge-label">{{item.label}}</text>
          <text class="badge-value">{{item.value}}</text>
        </view>
      </block>
    </view>
  </view>

  <view class="service-card ds-card">
    <view class="service-header">
      <text class="service-title">æ ¸å¿ƒæœåŠ¡</text>
      <text class="service-subtitle">è®¢å•ã€ç ”å­¦ã€æº¯æºä¸€è§¦å³è¾¾</text>
    </view>
    <view class="service-grid">
      <block wx:for="{{coreServices}}" wx:key="id">
        <view class="service-item" bindtap="handleEntryTap" data-path="{{item.path}}" data-tab="{{item.tab}}">
        <view class="service-icon">
          <image class="service-icon-img" mode="aspectFit" src="{{item.icon || '/assets/images/icons/classic-chinese/circular-totem.svg'}}"></image>
        </view>
          <text class="service-name">{{item.title}}</text>
        </view>
      </block>
    </view>
  </view>

  <view class="promotion-card">
    <view class="promotion-long-card ds-card surface-card--frosted" bindtap="handleEntryTap" data-path="/pages/hall/index">
      <view class="promotion-left">
        <text class="promotion-icon">ğŸŒ¾</text>
        <view class="promotion-text">
          <text class="promotion-title">ä¸­æ±ŸæŒ‚é¢åˆ¶ä½œå·¥è‰º</text>
          <text class="promotion-subtitle">æŸ¥çœ‹éé—çºªå½•ç‰‡ï¼Œäº†è§£å¤æ³•ç²¾é«“</text>
        </view>
      </view>
      <text class="entry-arrow">â€º</text>
    </view>
  </view>

  <view class="ops-card ds-card ds-card--frosted">
    <view class="ops-header">
      <text class="ops-title">è¿è¥æ¦‚è§ˆ</text>
      <text class="ops-subtitle">CMSå†…å®¹ã€OMSè®¢å•ã€é£æ§æ—¥å¿—</text>
    </view>
    <view class="ops-row">
      <text>åŠ¨æ€è¿è¥ä½</text>
      <text class="ops-highlight">{{ops && ops.operations && ops.operations.onlineSlots ? ops.operations.onlineSlots : 0}} ä¸ªä¸Šçº¿</text>
    </view>
    <view class="ops-row">
      <text>å¾…å®¡æ ¸UGC</text>
      <text class="ops-highlight">{{ops && ops.moderation && ops.moderation.pending ? ops.moderation.pending : 0}} æ¡</text>
    </view>
    <view class="ops-row">
      <text>å¼‚å¸¸é¢„è­¦</text>
      <text class="ops-highlight">{{ops && ops.alerts && ops.alerts.today ? ops.alerts.today : 0}} æ¡</text>
    </view>
    <button class="contact-btn ds-pill ds-pill--primary" bindtap="handleContactOps">è”ç³»è¿è¥ä¸å®¢æœ</button>
  </view>

  <view wx:if="{{moreServices.length}}" class="list-section">
    <text class="list-title">å¸¸ç”¨å·¥å…·</text>
    <block wx:for="{{moreServices}}" wx:key="id">
      <view class="entry-list-item" bindtap="handleEntryTap" data-path="{{item.path}}" data-tab="{{item.tab}}">
        <text class="entry-icon">â–¸</text>
        <view class="entry-content">
          <text class="entry-title">{{item.title}}</text>
          <text class="entry-desc">{{item.description}}</text>
        </view>
        <text class="entry-arrow">â€º</text>
      </view>
    </block>
  </view>
</view>
